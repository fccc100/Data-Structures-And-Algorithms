<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /**
     * @param {number[]} nums
     * @param {number[]} queries
     * @return {number[]}
     */
    var answerQueries = function (nums, queries) {
      let m = nums.length;
      let n = queries.length;

      let res = Array(n);
      for (let i = 0; i < n; i++) {
        res[i] = getLen(nums, queries[i]);
      }
      return res;
    };

    function getLen(nums, sum) {
      nums.sort((a, b) => a - b);

      let cur = 0;
      let res = 0;
      for (let i = 0; i < nums.length; i++) {
        cur += nums[i];
        if (cur <= sum) {
          res = i + 1;
        } else {
          break;
        }
      }
      return res;
    }

    //     [736411,184882,914641,37925,214915]
    // [331244,273144,118983,118252,305688,718089,665450]
    // 输出：
    // [2,2,1,1,2,2,2]
    // 预期：
    // [2,2,1,1,2,3,3]


    /**
     * @param {string} s
     * @return {string}
     */
    var removeStars = function (s) {
      let stack = [];
      for (let i = 0; i < s.length; i++) {
        if (!stack.length) {
          stack.push(s[i]);
        } else {
          if (s[i] == '*') {
            stack.pop();
          } else {
            stack.push(s[i]);
          }
        }
      }
      if (!stack.length) return '';
      return stack.join('');
    };

    /**
     * @param {string[]} garbage
     * @param {number[]} travel
     * @return {number}
     */
    var garbageCollection = function (garbage, travel) {
      let n = garbage.length;

      let p = Array(n).fill(0);
      let g = Array(n).fill(0);
      let m = Array(n).fill(0);

      for (let i = 0; i < n; i++) {
        for (let j = 0; j < garbage[i].length; j++) {
          if (garbage[i][j] == 'G') {
            g[i]++;
          } else if (garbage[i][j] == 'P') {
            p[i]++;
          } else {
            m[i]++;
          }
        }
      }

      let preP = Array(n).fill(0);
      let preG = Array(n).fill(0);
      let preM = Array(n).fill(0);

      preP[n - 1] = 0;
      for (let i = n - 2; i >= 0; i--) {
        preP[i] = p[i + 1] + preP[i + 1];
      }
      preG[n - 1] = 0;
      for (let i = n - 2; i >= 0; i--) {
        preG[i] = g[i + 1] + preG[i + 1];
      }
      preM[n - 1] = 0;
      for (let i = n - 2; i >= 0; i--) {
        preM[i] = m[i + 1] + preM[i + 1];
      }

      // 收p
      let res = 0;
      for (let i = 0; i < n; i++) {
        if (p[i] == 0 && preP[i] == 0) {
          break;
        }
        if (p[i] != 0) {
          res += p[i];
        }
        if (preP[i] != 0) {
          res += travel[i];
        }
      }
      for (let i = 0; i < n; i++) {
        if (m[i] == 0 && preM[i] == 0) {
          break;
        }
        if (m[i] != 0) {
          res += m[i];
        }
        if (preM[i] != 0) {
          res += travel[i];
        }
      }
      for (let i = 0; i < n; i++) {
        if (g[i] == 0 && preG[i] == 0) {
          break;
        }
        if (g[i] != 0) {
          res += g[i];
        }
        if (preG[i] != 0) {
          res += travel[i];
        }
      }
      return res;
    };

    // p:   [0, 1, 1, 0]
    // preP:[2, 1, 0, 0]

    // g: [1, 0, 1, 2]
    // m: [0, 0, 0, 0]


    /**
     * @param {number} k
     * @param {number[][]} rowConditions
     * @param {number[][]} colConditions
     * @return {number[][]}
     */
    var buildMatrix = function (k, rowConditions, colConditions) {
      let res = Array(k);
      for (let i = 0; i < res.length; i++) {
        res[i] = Array(k).fill(0);
      }

      let rowRes = build(k, rowConditions);
      let colRes = build(k, colConditions);
      console.log(rowRes, colRes, 'reseresrsrserserse')
      if (!rowRes || !colRes) return [];
      if (rowRes.length < k || colRes.length < k) return [];


      let rowIndex = Array(k + 1);
      let colIndex = Array(k + 1);


      for (let i = 0; i < rowRes.length; i++) {
        rowIndex[rowRes[i]] = i;
      }
      for (let i = 0; i < colRes.length; i++) {
        colIndex[colRes[i]] = i;
      }



      for (let i = 1; i <= k; i++) {
        res[rowIndex[i]][colIndex[i]] = i;
      }


      // 拿到row和col


      return res;
    };

    function build(k, rowConditions) {
      let rowGraph = Array(k + 1);
      let rowDegree = Array(k + 1).fill(0);
      for (let i = 0; i <= k; i++) {
        rowGraph[i] = new Set();
      }

      for (let i = 0; i < rowConditions.length; i++) {
        if (!rowGraph[rowConditions[i][0]].has(rowConditions[i][1])) {
          rowDegree[rowConditions[i][1]]++;
        }

        rowGraph[rowConditions[i][0]].add(rowConditions[i][1]);
      }
      
      let queue = [];
      let rowRes = [];
      for (let i = 1; i < rowDegree.length; i++) {
        if (rowDegree[i] == 0) {
          queue.push(i);
          rowRes.push(i)
        }
      }
      console.log(queue)
      if (!queue.length) {
        return false;
      }

      // rowRes[i]表示第i行能放的数字


      while (queue.length) {
        let len = queue.length;

        for (let i = 0; i < len; i++) {
          let cur = queue.shift();

          for (let w of rowGraph[cur]) {

            rowDegree[w]--;

            if (rowDegree[w] == 0) {
              rowRes.push(w);
              queue.push(w);
            }
          }
        }
      }
      return rowRes;
    }

    // row: 1, 3
    // col: 3
  </script>
</body>

</html>